<div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.InteropServices</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Windows.Storage.Streams</span><span class="p">;</span>
 
<span class="k">namespace</span> <span class="nn">BeatBuilder.Audio</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">unsafe</span> <span class="k">class</span> <span class="nc">FloatBuffer</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">IBuffer</span> <span class="n">m_buffer</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">float</span><span class="p">*</span> <span class="n">m_dataPtr</span><span class="p">;</span>
 
        <span class="k">public</span> <span class="kt">uint</span> <span class="n">Length</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_buffer</span><span class="p">.</span><span class="n">Capacity</span> <span class="p">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">}</span>
 
        <span class="k">public</span> <span class="kt">float</span> <span class="k">this</span><span class="p">[</span><span class="kt">int</span> <span class="n">key</span><span class="p">]</span>
        <span class="p">{</span>
            <span class="k">get</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="p">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfRangeException</span><span class="p">();</span>
 
                <span class="k">return</span> <span class="n">m_dataPtr</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">set</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="p">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfRangeException</span><span class="p">();</span>
 
                <span class="n">m_dataPtr</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
 
        <span class="k">public</span> <span class="nf">FloatBuffer</span><span class="p">(</span><span class="n">IBuffer</span> <span class="n">buffer</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">m_buffer</span> <span class="p">=</span> <span class="n">buffer</span><span class="p">;</span>
            <span class="n">m_dataPtr</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">*)((</span><span class="n">IBufferByteAccess</span><span class="p">)</span><span class="n">buffer</span><span class="p">).</span><span class="n">Buffer</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>